{"mappings":"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","sources":["src/index.ts","src/bodymovin-player.ts","src/via-tag.ts","src/code-editor.ts","src/data-table.ts","src/track-drag.ts","src/filter-builder.ts","src/mapbox.ts","src/markdown-viewer.ts","src/rich-text.ts","src/side-nav.ts","src/size-break.ts","src/tab-selector.ts","src/make-sorter.ts"],"sourcesContent":["export * from './bodymovin-player'\nexport * from './code-editor'\nexport * from './data-table'\nexport * from './filter-builder'\nexport * from './mapbox'\nexport * from './markdown-viewer'\nexport * from './rich-text'\nexport * from './side-nav'\nexport * from './size-break'\nexport * from './tab-selector'\nexport { trackDrag } from './track-drag'\nexport { scriptTag, styleSheet } from './via-tag'\nexport { makeSorter } from './make-sorter'\n","// https://lottiefiles.github.io/lottie-docs/advanced_interactions/\n\nimport { Component as WebComponent, ElementCreator } from 'xinjs'\nimport { scriptTag } from './via-tag'\n\ninterface LottieConfig {\n  container?: HTMLElement | ShadowRoot\n  renderer: 'svg' | 'cancas' | 'html'\n  loop: boolean\n  autoplay: boolean\n  animationData?: string\n  path?: string\n  [key: string]: any\n}\n\nclass BodymovinPlayer extends WebComponent {\n  content = null\n  src = ''\n  json = ''\n  config: LottieConfig = {\n    renderer: 'svg',\n    loop: true,\n    autoplay: true,\n  }\n\n  static bodymovinAvailable?: Promise<any>\n\n  animation: any\n\n  styleNode = WebComponent.StyleNode({\n    ':host': {\n      width: 400,\n      height: 400,\n      display: 'inline-block',\n    },\n  })\n\n  private _loading = false\n\n  get loading(): boolean {\n    return this._loading\n  }\n\n  constructor() {\n    super()\n    this.initAttributes('src', 'json')\n    if (BodymovinPlayer.bodymovinAvailable === undefined) {\n      BodymovinPlayer.bodymovinAvailable = scriptTag(\n        'https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js',\n        'bodymovin'\n      )\n    }\n  }\n\n  private readonly doneLoading = (): void => {\n    this._loading = false\n  }\n\n  private readonly load = ({ bodymovin }: { bodymovin: any }): void => {\n    this._loading = true\n\n    this.config.container =\n      this.shadowRoot !== null ? this.shadowRoot : undefined\n    if (this.json !== '') {\n      this.config.animationData = this.json\n      delete this.config.path\n    } else if (this.src !== '') {\n      delete this.config.animationData\n      this.config.path = this.src\n    } else {\n      console.log(\n        '%c<bodymovin-player>%c expected either %cjson%c (animation data) or %csrc% c(url) but found neither.',\n        'color: #44f; background: #fff; padding: 0 5px',\n        'color: default',\n        'color: #44f; background: #fff; padding: 0 5px',\n        'color: default',\n        'color: #44f; background: #fff; padding: 0 5px',\n        'color: default'\n      )\n    }\n\n    if (this.animation) {\n      this.animation.destroy()\n      const root = this.shadowRoot\n      if (root !== null) {\n        root.querySelector('svg')?.remove()\n      }\n    }\n    this.animation = bodymovin.loadAnimation(this.config)\n    this.animation.addEventListener('DOMLoaded', this.doneLoading)\n  }\n\n  render(): void {\n    super.render()\n\n    BodymovinPlayer.bodymovinAvailable!.then(this.load).catch(\n      (e: string): void => {\n        console.error(e)\n      }\n    )\n  }\n}\n\nexport const bodymovinPlayer = BodymovinPlayer.elementCreator({\n  tag: 'bodymovin-player',\n}) as ElementCreator<BodymovinPlayer>\n","import { elements } from 'xinjs'\n\ninterface PromiseMap {\n  [key: string]: Promise<any>\n}\n\nconst loadedScripts: PromiseMap = {}\nexport function scriptTag(\n  src: string,\n  existingSymbolName?: string\n): Promise<any> {\n  if (loadedScripts[src] === undefined) {\n    if (existingSymbolName !== undefined) {\n      // @ts-expect-error\n      const existing = globalThis[existingSymbolName]\n      loadedScripts[src] = Promise.resolve({ [existingSymbolName]: existing })\n    }\n\n    const scriptElt = elements.script({ src })\n\n    document.head.append(scriptElt)\n\n    loadedScripts[src] = new Promise((resolve) => {\n      scriptElt.onload = () => resolve(globalThis)\n    })\n  }\n\n  return loadedScripts[src]\n}\n\nconst loadedStyleSheets: PromiseMap = {}\nexport function styleSheet(href: string): Promise<void> {\n  if (loadedStyleSheets[href] === undefined) {\n    const linkElement = elements.link({\n      rel: 'stylesheet',\n      type: 'text/css',\n      href,\n    })\n\n    document.head.append(linkElement)\n\n    loadedStyleSheets[href] = new Promise((resolve) => {\n      linkElement.onload = resolve\n    })\n  }\n  return loadedStyleSheets[href]\n}\n","import { Component as WebComponent, ElementCreator } from 'xinjs'\nimport { scriptTag } from './via-tag'\n\nconst ACE_BASE_URL = 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.23.2/'\nconst DEFAULT_THEME = 'ace/theme/tomorrow'\n\nconst makeCodeEditor = async (\n  codeElement: any,\n  mode = 'html',\n  options = {},\n  theme = DEFAULT_THEME\n) => {\n  const { ace } = await scriptTag(`${ACE_BASE_URL}ace.min.js`)\n  ace.config.set('basePath', ACE_BASE_URL)\n  const editor = ace.edit(codeElement, {\n    mode: `ace/mode/${mode}`,\n    tabSize: 2,\n    useSoftTabs: true,\n    useWorker: false,\n    ...options,\n  })\n  editor.setTheme(theme)\n  return editor\n}\n\nclass CodeEditor extends WebComponent {\n  value = ''\n  mode = 'javascript'\n  disabled = false\n  role = 'code editor'\n\n  get editor(): any {\n    return this._editor\n  }\n  private _editor: any | undefined\n  private _editorPromise: Promise<any> | undefined\n  options: any = {}\n  theme = DEFAULT_THEME\n\n  styleNode = WebComponent.StyleNode({\n    ':host': {\n      display: 'block',\n      position: 'relative',\n    },\n  })\n\n  constructor() {\n    super()\n\n    this.initAttributes('mode', 'theme', 'disabled')\n  }\n\n  onResize() {\n    if (this.editor !== undefined) {\n      this.editor.resize(true)\n    }\n  }\n\n  updateValue = async (event: Event) => {\n    // changes to the element will be targted on the custom-element\n    // changes by the user will target the textarea created by ace editor\n    if (event.target !== this && this.editor) {\n      this.value = this.editor.getValue()\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback()\n\n    if (this.value === '') {\n      this.value = this.textContent !== null ? this.textContent.trim() : ''\n    }\n\n    if (this._editorPromise === undefined) {\n      this._editorPromise = makeCodeEditor(\n        this,\n        this.mode,\n        this.options,\n        this.theme\n      )\n      this._editorPromise.then((editor) => {\n        this._editor = editor\n        editor.setValue(this.value, 1)\n      })\n    }\n\n    this.addEventListener('change', this.updateValue)\n  }\n\n  render(): void {\n    super.render()\n\n    if (this.editor !== undefined) {\n      if (this.editor.getValue() !== this.value) {\n        this.editor.setValue(this.value)\n      }\n    }\n    if (this._editorPromise !== undefined) {\n      this._editorPromise.then((editor) => editor.setReadOnly(this.disabled))\n    }\n  }\n}\n\nexport const codeEditor = CodeEditor.elementCreator({\n  tag: 'code-editor',\n}) as ElementCreator<CodeEditor>\n","import {\n  Component as WebComponent,\n  ElementCreator,\n  elements,\n  xin,\n  vars,\n  xinValue,\n} from 'xinjs'\nimport { trackDrag } from './track-drag'\n\nfunction defaultWidth(\n  array: any[],\n  prop: string,\n  charWidth: number\n): number | boolean {\n  const example = array.find(\n    (item) => item[prop] !== undefined && item[prop] !== null\n  )\n  if (example !== undefined) {\n    const value = example[prop]\n    switch (typeof value) {\n      case 'string':\n        if (value.match(/^\\d+(\\.\\d+)?$/)) {\n          return 6 * charWidth\n        } else if (value.includes(' ')) {\n          return 20 * charWidth\n        } else {\n          return 12 * charWidth\n        }\n      case 'number':\n        return 6 * charWidth\n      case 'boolean':\n        return 5 * charWidth\n      case 'object':\n        return false\n      default:\n        return 8 * charWidth\n    }\n  }\n  return false\n}\n\nconst { div, span, template } = elements\n\ninterface ColumnOptions {\n  name?: string\n  prop: string\n  width: number\n  visible?: boolean\n  align?: string\n  headerCell?: (options: ColumnOptions) => HTMLElement\n  dataCell?: (options: ColumnOptions) => HTMLElement\n}\n\ninterface TableData {\n  columns?: ColumnOptions[] | null\n  array: any[]\n  filter?: ArrayFilter | null\n}\n\ntype ArrayFilter = (array: any[]) => any[]\n\nconst passThru = (array: any[]) => array\n\nclass DataTable extends WebComponent {\n  get value(): TableData {\n    return {\n      array: this.array,\n      filter: this.filter,\n      columns: this.columns,\n    }\n  }\n\n  set value(data: TableData) {\n    const { array, columns, filter } = xinValue(data)\n    if (\n      this._array !== array ||\n      this._columns !== columns ||\n      this._filter !== filter\n    ) {\n      this.queueRender()\n    }\n    this._array = array || []\n    this._columns = columns || null\n    this._filter = filter || passThru\n  }\n\n  private _array: any[] = []\n  private _columns: ColumnOptions[] | null = null\n  private _filter: ArrayFilter = passThru\n  charWidth = 15\n  rowHeight = 30\n  minColumnWidth = 30\n\n  get virtual(): { height: number } | undefined {\n    return this.rowHeight > 0 ? { height: this.rowHeight } : undefined\n  }\n\n  constructor() {\n    super()\n\n    this.initAttributes('rowHeight', 'charWidth', 'minColumnWidth')\n  }\n\n  get array(): any[] {\n    return this._array\n  }\n\n  set array(newArray: any[]) {\n    this._array = xinValue(newArray)\n    this.queueRender()\n  }\n\n  get filter(): ArrayFilter {\n    return this._filter\n  }\n\n  set filter(filterFunc: ArrayFilter) {\n    if (this._filter !== filterFunc) {\n      this._filter = filterFunc\n      this.queueRender()\n    }\n  }\n\n  get columns(): ColumnOptions[] {\n    if (!Array.isArray(this._columns)) {\n      const { _array } = this\n      this._columns = Object.keys(_array[0] || {}).map((prop: string) => {\n        const width = defaultWidth(_array, prop, this.charWidth)\n        return {\n          name: prop.replace(/([a-z])([A-Z])/g, '$1 $2').toLocaleLowerCase(),\n          prop,\n          align:\n            typeof _array[0][prop] === 'number' ||\n            (_array[0][prop] !== '' && !isNaN(_array[0][prop]))\n              ? 'right'\n              : 'left',\n          visible: width !== false,\n          width: width ? width : 0,\n        } as ColumnOptions\n      })\n    }\n    return this._columns\n  }\n\n  set columns(newColumns: ColumnOptions[]) {\n    this._columns = newColumns\n    this.queueRender()\n  }\n\n  get visibleColumns(): ColumnOptions[] {\n    return this.columns.filter((c) => c.visible !== false)\n  }\n\n  get visibleRecords(): any[] {\n    return xin[this.instanceId] as any[]\n  }\n\n  content = null\n\n  getColumn(event: any): ColumnOptions | undefined {\n    const x =\n      (event.touches !== undefined ? event.touches[0].clientX : event.clientX) -\n      this.getBoundingClientRect().x\n    const epsilon = event.touches !== undefined ? 20 : 5\n    let boundaryX = 0\n    const log: any[] = []\n    const column = this.visibleColumns.find((options: ColumnOptions) => {\n      if (options.visible !== false) {\n        boundaryX += options.width\n        log.push(boundaryX)\n        return Math.abs(x - boundaryX) < epsilon\n      }\n    })\n    return column\n  }\n\n  setCursor = (event: Event) => {\n    const column = this.getColumn(event)\n    if (column !== undefined) {\n      this.style.cursor = 'col-resize'\n    } else {\n      this.style.cursor = ''\n    }\n  }\n\n  resizeColumn = (event: any) => {\n    const column = this.getColumn(event)\n    if (column !== undefined) {\n      const origWidth = column.width\n      const isTouchEvent = event.touches !== undefined\n      const touchIdentifier = isTouchEvent\n        ? event.touches[0].identifier\n        : undefined\n      trackDrag(\n        event,\n        (dx, dy, event: any) => {\n          const touch = isTouchEvent\n            ? [...event.touches].find(\n                (touch: any) => touch.identifier === touchIdentifier\n              )\n            : true\n          if (touch === undefined) {\n            return true\n          }\n          const width = origWidth + dx\n          column.width =\n            width > this.minColumnWidth ? width : this.minColumnWidth\n          this.setColumnWidths()\n          if (event.type === 'mouseup') {\n            return true\n          }\n        },\n        'col-resize'\n      )\n    }\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback()\n\n    this.addEventListener('mousemove', this.setCursor)\n    this.addEventListener('mousedown', this.resizeColumn)\n    this.addEventListener('touchstart', this.resizeColumn, { passive: true })\n  }\n\n  setColumnWidths() {\n    this.style.setProperty(\n      '--grid-columns',\n      this.visibleColumns.map((c) => c.width + 'px').join(' ')\n    )\n  }\n\n  get rowStyle() {\n    return {\n      display: 'grid',\n      gridTemplateColumns: vars.gridColumns,\n      height: this.rowHeight + 'px',\n      lineHeight: this.rowHeight + 'px',\n    }\n  }\n\n  get cellStyle() {\n    return {\n      overflow: 'hidden',\n      whiteSpace: 'nowrap',\n      textOverflow: 'ellipsis',\n    }\n  }\n\n  headerCell = (options: ColumnOptions) =>\n    options.headerCell !== undefined\n      ? options.headerCell(options)\n      : span(\n          {\n            class: 'th',\n            role: 'columnheader',\n            ariaSort: 'none',\n            style: {\n              ...this.cellStyle,\n              textAlign: options.align || 'left',\n            },\n          },\n          typeof options.name === 'string' ? options.name : options.prop\n        )\n\n  dataCell = (options: ColumnOptions) => {\n    if (options.dataCell !== undefined) {\n      return options.dataCell(options)\n    }\n    return span({\n      class: 'td',\n      role: 'cell',\n      style: {\n        ...this.cellStyle,\n        textAlign: options.align || 'left',\n      },\n      bindText: `^.${options.prop}`,\n    })\n  }\n\n  get visibleRows(): any[] {\n    return xinValue(xin[this.instanceId]) as any[]\n  }\n\n  render() {\n    super.render()\n\n    xin[this.instanceId] = this.filter(this._array)\n\n    this.textContent = ''\n\n    this.style.display = 'flex'\n    this.style.flexDirection = 'column'\n    const { visibleColumns } = this\n    this.setColumnWidths()\n    this.append(\n      div(\n        { class: 'thead', role: 'rowgroup' },\n        div(\n          {\n            class: 'tr',\n            role: 'row',\n            style: this.rowStyle,\n          },\n          ...visibleColumns.map(this.headerCell)\n        )\n      ),\n      div(\n        {\n          class: 'tbody',\n          role: 'rowgroup',\n          style: {\n            content: ' ',\n            minHeight: '200px',\n            flex: '1 1 100px',\n            overflow: 'hidden',\n            overflowY: 'scroll',\n          },\n          bindList: {\n            value: this.instanceId,\n            virtual: this.virtual,\n          },\n        },\n        template(\n          div(\n            {\n              class: 'tr',\n              role: 'row',\n              style: this.rowStyle,\n            },\n            ...visibleColumns.map(this.dataCell)\n          )\n        )\n      )\n    )\n  }\n}\n\nexport const dataTable = DataTable.elementCreator({\n  tag: 'data-table',\n}) as ElementCreator<DataTable>\n","import { elements } from 'xinjs'\n\ntype TrackerCallback = (dx: number, dy: number, event: any) => true | undefined\n\nexport const trackDrag = (\n  event: any,\n  callback: TrackerCallback,\n  cursor = 'default'\n): void => {\n  const isTouchEvent = event.type.startsWith('touch')\n\n  if (!isTouchEvent) {\n    const origX = event.clientX\n    const origY = event.clientY\n\n    const tracker = elements.div({\n      style: {\n        content: ' ',\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        cursor,\n      },\n    })\n\n    document.body.append(tracker)\n\n    const wrappedCallback = (event: any) => {\n      const dx = event.clientX - origX\n      const dy = event.clientY - origY\n      if (callback(dx, dy, event) === true) {\n        tracker.remove()\n      }\n    }\n\n    tracker.addEventListener('mousemove', wrappedCallback, { passive: true })\n    tracker.addEventListener('mouseup', wrappedCallback, { passive: true })\n  } else if (event.type.startsWith('touch')) {\n    const origX = event.touches[0].clientX\n    const origY = event.touches[0].clientY\n    const target: any = event.target\n\n    let dx = 0\n    let dy = 0\n    const wrappedCallback = (event: any) => {\n      if (event.touches.length > 0) {\n        dx = event.touches[0].clientX - origX\n        dy = event.touches[0].clientY - origY\n      }\n      if (callback(dx, dy, event) === true || event.touches.length === 0) {\n        target.removeEventListener('touchmove', wrappedCallback)\n        target.removeEventListener('touchend', wrappedCallback)\n        target.removeEventListener('touchcancel', wrappedCallback)\n      }\n    }\n\n    target.addEventListener('touchmove', wrappedCallback, { passive: true })\n    target.addEventListener('touchend', wrappedCallback, { passive: true })\n    target.addEventListener('touchcancel', wrappedCallback, { passive: true })\n  }\n}\n","import {\n  Component as WebComponent,\n  ElementCreator,\n  elements,\n  debounce,\n} from 'xinjs'\n\nconst { input } = elements\n\ntype ArrayFilter = (array: any[]) => any[]\n\nconst passThru = (array: any[]) => array\nconst NULL_FILTER_DESCRIPTION = 'null filter, everything matches'\n\ntype ObjectTest = (obj: any) => boolean\n\ninterface FilterMaker {\n  hint: string\n  explanation?: string\n  description: (...matches: string[]) => string\n  token: RegExp\n  makeFilter: (...matches: string[]) => ObjectTest\n}\n\nexport const availableFilters: FilterMaker[] = [\n  {\n    hint: 'field=value',\n    explanation: 'field is value, ignoring case',\n    description: (field: string, value: string) =>\n      isNaN(Number(value))\n        ? field !== ''\n          ? `${field} is \"${value}\"`\n          : `any field is \"${value}\"`\n        : field !== ''\n        ? `${field} == ${value}`\n        : `any field == ${value}`,\n    token: /^([\\w-_]*)=(.+)$/,\n    makeFilter: (field: string, value: string) => {\n      if (isNaN(Number(value))) {\n        value = String(value).toLocaleLowerCase()\n        if (field !== '') {\n          return (obj: any) => String(obj[field]).toLocaleLowerCase() == value\n        }\n        return (obj: any) =>\n          Object.values(obj).find(\n            (val) => String(val).toLocaleLowerCase() == value\n          ) !== undefined\n      }\n      const num = Number(value)\n      if (field !== '') {\n        return (obj: any) => Number(obj[field]) == num\n      }\n      return (obj: any) =>\n        Object.values(obj).find((val) => Number(val) == num) !== undefined\n    },\n  },\n  {\n    hint: 'field!=value',\n    explanation: 'field is not value, ignoring case',\n    description: (field: string, value: string) => `${field} â‰  ${value}`,\n    token: /^([\\w-_]+)!=(.+)$/,\n    makeFilter: (field: string, value: string) => {\n      value = value.toLocaleLowerCase()\n      return (obj: any) => String(obj[field]).toLocaleLowerCase() != value\n    },\n  },\n  {\n    hint: 'field>value',\n    explanation: 'field > value (numeric / A-Z)',\n    description: (field: string, value: string) =>\n      isNaN(Number(value))\n        ? `${field} > ${value} (A-Z)`\n        : `${field} > ${value}`,\n    token: /^([\\w-_]+)>(.+)$/,\n    makeFilter: (field: string, value: string) => {\n      if (!isNaN(Number(value))) {\n        const num = Number(value)\n        return (obj: any) => Number(obj[field]) > num\n      }\n      value = value.toLocaleLowerCase()\n      return (obj: any) => String(obj[field]).toLocaleLowerCase() > value\n    },\n  },\n  {\n    hint: 'field<value',\n    explanation: 'field < value (numeric / A-Z)',\n    description: (field: string, value: string) =>\n      isNaN(Number(value))\n        ? `${field} < ${value} (A-Z)`\n        : `${field} < ${value}`,\n    token: /^([\\w-_]+)<(.+)$/,\n    makeFilter: (field: string, value: string) => {\n      if (!isNaN(Number(value))) {\n        const num = Number(value)\n        return (obj: any) => Number(obj[field]) < num\n      }\n      value = value.toLocaleLowerCase()\n      return (obj: any) => String(obj[field]).toLocaleLowerCase() < value\n    },\n  },\n  {\n    hint: 'field:value',\n    explanation: 'field contains value, ignoring case',\n    description: (field: string, value: string) =>\n      `${field} contains \"${value}\"`,\n    token: /^([\\w-_]+):(.+)$/,\n    makeFilter: (field: string, value: string) => {\n      value = value.toLocaleLowerCase()\n      return (obj: any) =>\n        String(obj[field]).toLocaleLowerCase().includes(value)\n    },\n  },\n  {\n    hint: '!!field',\n    explanation: 'field is true, non-empty, non-zero',\n    description: (match: string) => `${match} is truthy`,\n    token: /^!!([\\w-_]+)$/,\n    makeFilter: (match: string) => (obj: any) => !!obj[match],\n  },\n  {\n    hint: '!field',\n    explanation: 'field is false, empty, zero',\n    description: (match: string) => `${match} is falsy`,\n    token: /^!([\\w-_]+)$/,\n    makeFilter: (match: string) => (obj: any) => !obj[match],\n  },\n  {\n    hint: 'value',\n    explanation: 'any field contains value',\n    description: (match: string) => `\"${match}\" in any property`,\n    token: /^(.+)$/,\n    makeFilter: (match: string) => {\n      match = match.toLocaleLowerCase()\n      return (obj: any) =>\n        Object.values(obj).find((value) =>\n          String(value).toLocaleLowerCase().includes(match)\n        ) !== undefined\n    },\n  },\n]\n\ninterface Filter {\n  description: string\n  test: ObjectTest\n}\n\nexport function getFilter(\n  term: string,\n  filters = availableFilters\n): Filter | undefined {\n  const maker = filters.find((filter: FilterMaker) => filter.token.test(term))\n  if (maker !== undefined) {\n    // we know it will match\n    const [, ...terms] = term.match(maker.token)!\n    return {\n      description: maker.description(...terms),\n      test: maker.makeFilter(...terms),\n    }\n  }\n}\n\nclass FilterBuilder extends WebComponent {\n  value = ''\n  filter: ArrayFilter = passThru\n  title = NULL_FILTER_DESCRIPTION\n  content = input({\n    type: 'search',\n    part: 'input',\n    style: {\n      width: '100%',\n      height: 'auto',\n    },\n  })\n  placeholder = ''\n  help = ''\n\n  filters = availableFilters\n\n  constructor() {\n    super()\n    this.initAttributes('title', 'placeholder', 'help')\n  }\n\n  buildFilter = debounce((query: string): void => {\n    // @ts-expect-error\n    const filters: Filter[] = query\n      .split(/\\s+/)\n      .filter((part) => part !== '')\n      .map((part) => getFilter(part, this.filters))\n      .filter((part) => part !== undefined) // because we remove undefined\n\n    if (filters.length === 0) {\n      this.title = NULL_FILTER_DESCRIPTION\n      if (this.filter !== passThru) {\n        this.filter = passThru\n        this.dispatchEvent(new Event('change'))\n      }\n    } else {\n      this.filter = filters.reduce(\n        (f: false | ArrayFilter, filter: Filter): ArrayFilter => {\n          let g: ArrayFilter\n          if (f === false) {\n            g = (array: any[]) => array.filter(filter.test)\n          } else {\n            g = (array: any[]) => f(array.filter(filter.test))\n          }\n          return g\n        },\n        false\n      ) as ArrayFilter // because this array is not empty\n\n      this.title = filters.map((f) => f.description).join(', and ')\n      this.dispatchEvent(new Event('change'))\n    }\n  }, 500)\n\n  reset() {\n    if (this.filter !== passThru) {\n      this.title = NULL_FILTER_DESCRIPTION\n      this.filter = passThru\n      this.dispatchEvent(new Event('change'))\n    }\n  }\n\n  handleInput = (event: Event) => {\n    const { input } = this.parts as { [key: string]: HTMLInputElement }\n    this.buildFilter(input.value)\n    this.value = input.value\n    event.stopPropagation()\n    event.preventDefault()\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback()\n    this.setAttribute('title', this.title)\n\n    this.help = this.filters\n      .map((f) =>\n        f.explanation !== undefined ? `${f.hint}: ${f.explanation}` : f.hint\n      )\n      .join('\\n')\n\n    const { input } = this.parts as { [key: string]: HTMLInputElement }\n    input.value = this.value\n    input.addEventListener('input', this.handleInput)\n    input.addEventListener('change', this.handleInput)\n    this.style.position = 'relative'\n  }\n\n  render() {\n    super.render()\n    const { input } = this.parts as { [key: string]: HTMLInputElement }\n    input.placeholder =\n      this.placeholder !== ''\n        ? this.placeholder\n        : this.filters.map((filter) => filter.hint).join(' ')\n    input.value = this.value\n  }\n}\n\nexport const filterBuilder = FilterBuilder.elementCreator({\n  tag: 'filter-builder',\n}) as ElementCreator<FilterBuilder>\n","import { Component as WebComponent, ElementCreator, elements } from 'xinjs'\nimport { styleSheet, scriptTag } from './via-tag'\n\nexport const MAPSTYLES = [\n  {\n    name: 'streets',\n    url: 'mapbox://styles/mapbox/streets-v10',\n  },\n  {\n    name: 'outdoors',\n    url: 'mapbox://styles/mapbox/outdoors-v10',\n  },\n  {\n    name: 'light',\n    url: 'mapbox://styles/mapbox/light-v9',\n  },\n  {\n    name: 'dark',\n    url: 'mapbox://styles/mapbox/dark-v9',\n  },\n  {\n    name: 'satellite',\n    url: 'mapbox://styles/mapbox/satellite-v9',\n  },\n  {\n    name: 'sateliite + streets',\n    url: 'mapbox://styles/mapbox/satellite-streets-v10',\n  },\n  {\n    name: 'preview day',\n    url: 'mapbox://styles/mapbox/navigation-preview-day-v2',\n  },\n  {\n    name: 'preview night',\n    url: 'mapbox://styles/mapbox/navigation-preview-night-v2',\n  },\n  {\n    name: 'guidance day',\n    url: 'mapbox://styles/mapbox/navigation-guidance-day-v2',\n  },\n  {\n    name: 'guidance night',\n    url: 'mapbox://styles/mapbox/navigation-guidance-night-v2',\n  },\n]\n\nconst { div } = elements\n\nclass MapBox extends WebComponent {\n  coords = '65.01715565258993,25.48081004203459,12'\n  content = div({ style: { width: '100%', height: '100%' } })\n  get map(): any {\n    return this._map\n  }\n  mapStyle = MAPSTYLES[0]\n  token = ''\n\n  static mapboxCSSAvailable: Promise<void>\n  static mapboxAvailable?: Promise<any>\n\n  private _map: any\n\n  styleNode = WebComponent.StyleNode({\n    ':host': {\n      display: 'inline-block',\n      position: 'relative',\n      width: '400px',\n      height: '400px',\n      textAlign: 'left',\n    },\n  })\n\n  constructor() {\n    super()\n    this.initAttributes('coords', 'token', 'mapStyle')\n\n    if (MapBox.mapboxCSSAvailable === undefined) {\n      MapBox.mapboxCSSAvailable = styleSheet(\n        'https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.css'\n      ).catch((e) => {\n        console.error('failed to load mapbox-gl.css', e)\n      })\n      MapBox.mapboxAvailable = scriptTag(\n        'https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.js'\n      ).catch((e) => {\n        console.error('failed to load mapbox-gl.js', e)\n      })\n    }\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback()\n    if (!this.token) {\n      console.error(\n        'mapbox requires an access token which you can provide via the token attribute'\n      )\n    }\n  }\n\n  render(): void {\n    super.render()\n\n    if (!this.token) {\n      return\n    }\n\n    const { div } = this.parts\n\n    const [long, lat, zoom] = this.coords.split(',').map((x) => Number(x))\n\n    if (this.map) {\n      this.map.remove()\n    }\n\n    MapBox.mapboxAvailable!.then(({ mapboxgl }: { mapboxgl: any }) => {\n      console.log(\n        '%cmapbox may complain about missing css because it is loaded async on demand',\n        'background: orange; color: black; padding: 0 5px;'\n      )\n      mapboxgl.accessToken = this.token\n      this._map = new mapboxgl.Map({\n        container: div,\n        style: this.mapStyle.url,\n        zoom,\n        center: [lat, long],\n      })\n\n      this._map.on('render', () => this._map.resize())\n    })\n  }\n}\n\nexport const mapBox = MapBox.elementCreator({\n  tag: 'map-box',\n}) as ElementCreator<MapBox>\n","import { Component, ElementCreator } from 'xinjs'\nimport { marked } from 'marked'\nclass MarkdownViewer extends Component {\n  src = ''\n  value = ''\n  content = null\n  constructor() {\n    super()\n    this.initAttributes('src')\n  }\n  connectedCallback(): void {\n    super.connectedCallback()\n    if (this.src !== '') {\n      ;(async () => {\n        const request = await fetch(this.src)\n        this.value = await request.text()\n      })()\n    } else if (this.value === '') {\n      this.value = this.textContent != null ? this.textContent : ''\n    }\n  }\n  render() {\n    super.render()\n    this.innerHTML = marked(typeof this.value === 'string' ? this.value : '', {\n      mangle: false,\n      headerIds: false,\n    })\n  }\n}\n\nexport const markdownViewer = MarkdownViewer.elementCreator({\n  tag: 'markdown-viewer',\n}) as ElementCreator<MarkdownViewer>\n","import {\n  Component as WebComponent,\n  ElementCreator,\n  elements,\n  vars,\n} from 'xinjs'\n\nconst { style, xinSlot, div } = elements\n\nconst richTextStyle = style()\n\nrichTextStyle.innerText = `\nrich-text {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\nrich-text [part=\"toolbar\"] {\n  padding: 4px;\n  display: flex;\n  gap: 0px;\n  flex: 0 0 auto;\n}\n`\n\ndocument.head.append(richTextStyle)\n\nclass RichText extends WebComponent {\n  get value(): string {\n    return this.parts.doc.innerHTML\n  }\n\n  set value(docHtml: string) {\n    this.parts.doc.innerHTML = docHtml\n  }\n\n  blockElement(elt: Node): Element | undefined {\n    const { doc } = this.parts\n    while (elt.parentElement !== null && elt.parentElement !== doc) {\n      elt = elt.parentElement\n    }\n    return elt.parentElement === doc ? (elt as Element) : undefined\n  }\n\n  get selectedBlocks(): any[] {\n    const { doc } = this.parts\n    const selObject = window.getSelection()\n    if (selObject === null) {\n      return []\n    }\n    const blocks = [] as any[]\n    for (let i = 0; i < selObject.rangeCount; i++) {\n      const range = selObject.getRangeAt(i)\n      if (!doc.contains(range.commonAncestorContainer)) {\n        continue\n      }\n      let block: Element | null = this.blockElement(\n        range.startContainer\n      ) as Element\n      const lastBlock = this.blockElement(range.endContainer) as Element\n      blocks.push(block)\n      while (block !== lastBlock && block !== null) {\n        block = block.nextElementSibling\n        blocks.push(block)\n      }\n    }\n    return blocks\n  }\n\n  get selectedText(): string {\n    const selObject = window.getSelection()\n    if (selObject === null) {\n      return ''\n    }\n    return this.selectedBlocks.length ? selObject.toString() : ''\n  }\n\n  selectionChange = (event: Event, editor: RichText): void => {}\n\n  content = [\n    xinSlot({\n      name: 'toolbar',\n      part: 'toolbar',\n    }),\n    div({\n      part: 'doc',\n      contenteditable: true,\n      style: {\n        flex: '1 1 auto',\n        outline: 'none',\n      },\n    }),\n    xinSlot({\n      part: 'content',\n    }),\n  ]\n\n  doCommand(command?: string) {\n    if (command === undefined) {\n      return\n    }\n    const args = command.split(',') as string[]\n\n    console.log('execCommand', args[0], false, ...args.slice(1))\n    document.execCommand(args[0], false, ...args.slice(1))\n  }\n\n  handleSelectChange = (event: Event) => {\n    // @ts-expect-error\n    const select = event.target.closest('select') as HTMLSelectElement\n    if (select == null) {\n      return\n    }\n\n    this.doCommand(select.value)\n  }\n\n  handleButtonClick = (event: Event) => {\n    // @ts-expect-error\n    const button = event.target.closest('button')\n    if (button == null) {\n      return\n    }\n\n    this.doCommand(button.dataset.command)\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback()\n\n    const { doc, content, toolbar } = this.parts\n    if (content.innerHTML !== '' && doc.innerHTML === '') {\n      doc.innerHTML = content.innerHTML\n      content.innerHTML = ''\n    }\n    content.style.display = 'none'\n\n    toolbar.addEventListener('click', this.handleButtonClick)\n    toolbar.addEventListener('change', this.handleSelectChange)\n\n    document.addEventListener('selectionchange', (event: Event) => {\n      this.selectionChange(event, this)\n    })\n  }\n}\n\nexport const richText = RichText.elementCreator({\n  tag: 'rich-text',\n}) as ElementCreator<RichText>\n","import {\n  Component as WebComponent,\n  ElementCreator,\n  elements,\n  vars,\n  varDefault,\n} from 'xinjs'\n\nconst { slot } = elements\n\nconst flexDirections = {\n  left: 'row',\n  right: 'row-reverse',\n  top: 'column',\n  bottom: 'column-reverse',\n}\n\nconst outsetMargins = {\n  left: ['marginLeft', 'marginRight'],\n  right: ['marginRight', 'marginLeft'],\n  top: ['marginTop', 'marginBottom'],\n  bottom: ['marginBottom', 'marginTop'],\n}\n\nclass SideNav extends WebComponent {\n  panelPosition: 'left' | 'right' | 'top' | 'bottom' = 'left'\n  minSize = 800\n  navSize = 200\n  compact = false\n\n  content = [slot({ name: 'nav' }), slot({ part: 'content' })]\n\n  private _contentVisible = false\n  get contentVisible(): boolean {\n    return this._contentVisible\n  }\n\n  set contentVisible(visible: boolean) {\n    this._contentVisible = visible\n    this.queueRender()\n  }\n\n  styleNode = WebComponent.StyleNode({\n    ':host': {\n      display: 'flex',\n      flexDirection: vars.flexDirection,\n      transition: varDefault.sideNavTransition('0.25s ease-out'),\n    },\n    ':host slot': {\n      position: 'relative',\n    },\n    ':host slot:not([name])': {\n      display: 'block',\n      flex: `0 0 ${vars.contentWidth}`,\n      width: vars.contentWidth,\n    },\n    ':host slot[name=\"nav\"]': {\n      display: 'block',\n      flex: `0 0 ${vars.navWidth}`,\n      width: vars.navWidth,\n    },\n  })\n\n  onResize = () => {\n    const { content } = this.parts\n    if (this.offsetParent === null) {\n      return\n    }\n\n    this.style.marginLeft =\n      this.style.marginRight =\n      this.style.marginTop =\n      this.style.marginBottom =\n        '0'\n\n    const empty =\n      [...this.childNodes].find((node) =>\n        node instanceof Element ? node.getAttribute('slot') !== 'nav' : true\n      ) === undefined\n    if (empty) {\n      this.style.setProperty('--nav-width', '100%')\n      this.style.setProperty('--content-width', '0%')\n      return\n    }\n\n    const parent = this.offsetParent as HTMLElement\n    const size = this.panelPosition.match(/left|right/)\n      ? parent.offsetWidth\n      : parent.offsetWidth\n\n    this.compact = size < this.minSize\n    if (!this.compact) {\n      content.classList.add('-side-nav-visible')\n      this.style.setProperty('--nav-width', `${this.navSize}px`)\n      this.style.setProperty(\n        '--content-width',\n        `calc(100% - ${this.navSize}px)`\n      )\n    } else {\n      content.classList.remove('-side-nav-visible')\n      this.style.setProperty('--nav-width', '50%')\n      this.style.setProperty('--content-width', '50%')\n\n      const margins = outsetMargins[this.panelPosition]\n      if (this.contentVisible) {\n        // @ts-expect-error\n        this.style[margins[0]] = '-100%'\n      } else {\n        // @ts-expect-error\n        this.style[margins[1]] = '-100%'\n      }\n    }\n  }\n\n  private observer: any\n  connectedCallback(): void {\n    super.connectedCallback()\n    this.contentVisible = this.parts.content.childNodes.length === 0\n    globalThis.addEventListener('resize', this.onResize)\n\n    this.observer = new MutationObserver(this.onResize)\n    this.observer.observe(this, { childList: true })\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback()\n    this.observer.disconnect()\n  }\n\n  constructor() {\n    super()\n    this.initAttributes('panelPosition', 'minSize', 'navSize', 'compact')\n  }\n\n  render(): void {\n    super.render()\n    this.style.setProperty(\n      '--flex-direction',\n      flexDirections[this.panelPosition]\n    )\n    this.onResize()\n  }\n}\n\nexport const sideNav = SideNav.elementCreator({\n  tag: 'side-nav',\n}) as ElementCreator<SideNav>\n","import { Component as WebComponent, ElementCreator, elements } from 'xinjs'\n\nconst { slot } = elements\n\nclass SizeBreak extends WebComponent {\n  minWidth = 0\n  minHeight = 0\n  value: 'normal' | 'small' = 'normal'\n\n  content = [slot({ part: 'normal' }), slot({ part: 'small', name: 'small' })]\n\n  styleNode = WebComponent.StyleNode({\n    ':host': {\n      display: 'inline-block',\n      position: 'relative',\n    },\n  })\n\n  constructor() {\n    super()\n    this.initAttributes('minWidth', 'minHeight')\n  }\n\n  onResize = () => {\n    const { normal, small } = this.parts\n    const parent = this.offsetParent as HTMLElement | null\n    if (parent === null) {\n      return\n    } else if (\n      parent.offsetWidth < this.minWidth ||\n      parent.offsetHeight < this.minHeight\n    ) {\n      normal.hidden = true\n      small.hidden = false\n      this.value = 'small'\n    } else {\n      normal.hidden = false\n      small.hidden = true\n      this.value = 'normal'\n    }\n  }\n\n  // TODO trigger a resize event when an ancestor element\n  // is inerted or moved into the DOM.\n  connectedCallback(): void {\n    super.connectedCallback()\n    globalThis.addEventListener('resize', this.onResize)\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback()\n    globalThis.removeEventListener('resize', this.onResize)\n  }\n}\n\nexport const sizeBreak = SizeBreak.elementCreator({\n  tag: 'size-break',\n}) as ElementCreator<SizeBreak>\n","import {\n  Component as WebComponent,\n  ElementCreator,\n  elements,\n  vars,\n} from 'xinjs'\n\nconst { div, slot } = elements\n\nclass TabSelector extends WebComponent {\n  value = 0\n\n  role = 'tabpanel'\n\n  styleNode = WebComponent.StyleNode({\n    ':host': {\n      display: 'flex',\n      flexDirection: 'column',\n      position: 'relative',\n      overflow: 'hidden',\n    },\n    slot: {\n      position: 'relative',\n      display: 'block',\n      flex: '1 1 auto',\n      overflow: 'hidden',\n      overflowY: 'auto',\n    },\n    '::slotted([hidden])': {\n      display: 'none !important',\n    },\n    ':host .tab-holder': {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    ':host .tabs': {\n      display: 'flex',\n      userSelect: 'none',\n      whiteSpace: 'nowrap',\n    },\n    ':host .tabs > div': {\n      padding: `${vars.spacing50} ${vars.spacing}`,\n      cursor: 'default',\n    },\n    ':host .tabs > [aria-selected=\"true\"]': {\n      color: vars.tabSelectorSelectedColor,\n    },\n    ':host .border': {\n      background: 'var(--tab-selector-bar-color, #ccc)',\n    },\n    ':host .border > .selected': {\n      content: ' ',\n      width: 0,\n      height: 'var(--tab-selector-bar-height, 2px)',\n      background: vars.tabSelectorSelectedColor,\n      transition: 'ease-out 0.2s',\n    },\n  })\n\n  content = [\n    div(\n      { class: 'tab-holder' },\n      div({ class: 'tabs', part: 'tabs' }),\n      div({ class: 'border' }, div({ class: 'selected', part: 'selected' }))\n    ),\n    slot(),\n  ]\n\n  constructor() {\n    super()\n    this.initAttributes('anne', 'example')\n  }\n\n  addTabBody(body: HTMLElement, selectTab = false): void {\n    if (!body.hasAttribute('name')) {\n      console.error('element has no name attribute', body)\n      throw new Error('element has no name attribute')\n    }\n    this.shadowRoot?.append(body)\n    this.setupTabs()\n    if (selectTab) {\n      this.value = this.bodies.length - 1\n    }\n    this.queueRender()\n  }\n\n  keyTab = (event: KeyboardEvent): void => {\n    const { tabs } = this.parts\n    const tabIndex = [...tabs.children].indexOf(event.target as HTMLElement)\n    switch (event.key) {\n      case 'ArrowLeft':\n        this.value =\n          (tabIndex + Number(tabs.children.length) - 1) % tabs.children.length\n        ;(tabs.children[this.value] as HTMLElement).focus()\n        event.preventDefault()\n        break\n      case 'ArrowRight':\n        this.value = (tabIndex + 1) % tabs.children.length\n        ;(tabs.children[this.value] as HTMLElement).focus()\n        event.preventDefault()\n        break\n      case ' ':\n        this.pickTab(event)\n        event.preventDefault()\n        break\n      default:\n      // console.log(event.key)\n    }\n  }\n\n  get bodies(): Element[] {\n    return [...this.children].filter((elt) => elt.hasAttribute('name'))\n  }\n\n  pickTab = (event: Event): void => {\n    const { tabs } = this.parts\n    const target = event.target as HTMLElement\n    const tabIndex = [...tabs.children].indexOf(target)\n    if (tabIndex > -1) {\n      this.value = tabIndex\n    }\n  }\n\n  setupTabs = (): void => {\n    const { tabs } = this.parts\n    const tabBodies = [...this.childNodes] as Element[]\n\n    tabBodies.filter((child) => child.hasAttribute('name'))\n    tabs.textContent = ''\n    for (const index in tabBodies) {\n      const tabBody = tabBodies[index]\n      const name = tabBody.getAttribute('name') as string\n      const bodyId = `${this.instanceId}-${index}`\n      tabBody.id = bodyId\n      tabs.append(div(name, { tabindex: 0, role: 'tab', ariaControls: bodyId }))\n    }\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback()\n    const { tabs } = this.parts\n    tabs.addEventListener('click', this.pickTab)\n    tabs.addEventListener('keydown', this.keyTab)\n    this.setupTabs()\n  }\n\n  render(): void {\n    const { tabs, selected } = this.parts\n    const tabBodies = this.bodies\n    for (let i = 0; i < tabBodies.length; i++) {\n      const tabBody = tabBodies[i]\n      const tab = tabs.children[i] as HTMLElement\n      if (this.value === Number(i)) {\n        tab.setAttribute('aria-selected', 'true')\n        selected.style.marginLeft = `${tab.offsetLeft - tabs.offsetLeft}px`\n        selected.style.width = `${tab.offsetWidth}px`\n        tabBody.removeAttribute('hidden')\n      } else {\n        tab.removeAttribute('aria-selected')\n        tabBody.setAttribute('hidden', '')\n      }\n    }\n  }\n}\n\nexport const tabSelector = TabSelector.elementCreator({\n  tag: 'tab-selector',\n}) as ElementCreator<TabSelector>\n","export type SortValuator<T> = (f: T) => (string | number)[]\n\nexport type SortCallback<T> = (p: T, q: T) => number\n\nexport function makeSorter<T>(\n  sortValuator: SortValuator<T>,\n  ascending = true\n): SortCallback<T> {\n  return (p: any, q: any) => {\n    const pSort = sortValuator(p)\n    const qSort = sortValuator(q)\n    for (const i in pSort) {\n      if (pSort[i] !== qSort[i]) {\n        return ascending\n          ? pSort[i] > qSort[i]\n            ? 1\n            : -1\n          : pSort[i] > qSort[i]\n          ? -1\n          : 1\n      }\n    }\n    return 0\n  }\n}\n"],"names":[],"version":3,"file":"index.js.map"}